{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import './style.css';\r\n\r\nconst icons = {\r\n    close: '<a draggable=\"false\" href=\"#\" class=\"ux-icon-close\" data-cmd=\"close\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\"><path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"/></svg></a>'\r\n}\r\n\r\nconst $ = {\r\n    el: (html) => {\r\n        let div = document.createElement('div');        \r\n        div.innerHTML = html.trim();\r\n        return div.firstChild;      \r\n    },\r\n\r\n    pushState: (state = null, url) => {\r\n        history.replaceState(state, null, '');\r\n        history.pushState(null, null, url);\r\n    },\r\n\r\n    run_script: (el) => {\r\n        Array.from(el.querySelectorAll(\"script\"))\r\n            .forEach(oldScriptEl => {\r\n                const newScriptEl = document.createElement(\"script\");\r\n                Array.from(oldScriptEl.attributes).forEach( attr => {\r\n                newScriptEl.setAttribute(attr.name, attr.value) \r\n            })\r\n          \r\n            const scriptText = document.createTextNode(oldScriptEl.innerHTML);\r\n            newScriptEl.appendChild(scriptText);  \r\n            oldScriptEl.parentNode.replaceChild(newScriptEl, oldScriptEl);\r\n        })\r\n    },\r\n\r\n    get_html: (url) => new Promise((resolve, reject) => {\r\n        fetch(url)\r\n            .then(response => response.text())\r\n            .then(html => resolve(html))\r\n            .catch(err => reject(err));\r\n    }),\r\n\r\n    default: (x, y) => {\r\n        if ((x === undefined) || (x === null) || (x === '')) {\r\n            return y;\r\n        }\r\n\r\n        return x;\r\n    }    \r\n}\r\n\r\nconst modals = [];\r\nlet dialogs_with_always_on_top = 0;\r\n\r\nlet _popstate_handler = (evt) => {\r\n    if (evt.state && (evt.state.type === 'modal')) {\r\n        evt.preventDefault();\r\n        evt.stopImmediatePropagation();\r\n\r\n        let dlg = modals.pop();\r\n\r\n        if (dlg) {\r\n            if (dlg.options.always_on_top) {\r\n                dialogs_with_always_on_top = dialogs_with_always_on_top - 1;\r\n\r\n                if (dialogs_with_always_on_top == 0) {\r\n                    document.body.classList.remove('hide-mobile-menu');\r\n                }\r\n            }\r\n\r\n            dlg.do_close();\r\n        }\r\n    }\r\n}\r\n\r\nlet _keydown_handler = (evt) => {\r\n    if (evt.key === 'Escape') {\r\n        if (modals.length > 0) {\r\n            evt.stopImmediatePropagation();        \r\n            evt.preventDefault();\r\n            history.back(); \r\n        }\r\n    }\r\n}\r\n\r\ndocument.addEventListener('keydown', _keydown_handler);   \r\nwindow.addEventListener('popstate', _popstate_handler);\r\n\r\nexport class ModalDialog {\r\n    constructor(options = {}) {\r\n        const _default = {\r\n            width: 720,\r\n            close_when_click_outside: true,\r\n            id: 'dialog',\r\n            padding: '3em',\r\n            transition_duration: 300,\r\n            delay_before_show: 0,\r\n            always_on_top: false,\r\n            animation: 'pop' // fade, pop\r\n        }\r\n\r\n        this.handlers = {};\r\n        this.cmd = '';\r\n        this.value = '';\r\n        this.options = Object.assign(_default, options);\r\n        this.dialog = document.createElement('dialog');\r\n        this.dialog.setAttribute('role', 'modal');\r\n        this.dialog.setAttribute('data-id', this.options.id);\r\n        this.popup = $.el('<div class=\"popup\" style=\"--width:' + this.options.width + 'px;--padding:' + this.options.padding + '\"><main></main>' + icons.close + '</div>');\r\n        \r\n        if (this.options.width < 640) {\r\n            this.popup.classList.add('small');\r\n        }\r\n\r\n        this.dialog.appendChild(this.popup);\r\n        this.dialog.get_instance = () => this;\r\n        \r\n        document.body.appendChild(this.dialog);\r\n        this.dialog.addEventListener('click', this._click_handler);\r\n    }\r\n\r\n    static get_modals = () => {\r\n        return modals;\r\n    }\r\n\r\n    static get_active_dialog = () => {\r\n        if (modals.length > 0) {\r\n            return modals[modals.length -1];\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    static get_json = (url) => new Promise((resolve, reject) => {\r\n        fetch(url)\r\n            .then(response => response.json())\r\n            .then(json => resolve(json))\r\n            .catch(err => reject(err));\r\n    })\r\n\r\n    _click_handler = (evt) => {\r\n        if (evt.target.matches('dialog')) {\r\n            if (this.options.close_when_click_outside === true) {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n\r\n                setTimeout(()=> {\r\n                    this.set_cmd('close');\r\n                    this.set_value('');\r\n                    this.close();                    \r\n                }, 0)\r\n            }\r\n        } else if (evt.target.matches('[data-cmd]')) {\r\n            this.cmd = evt.target.dataset['cmd'];\r\n\r\n            if (!['edit','edit-item','settings','new-page','copy-text','remove-page','buy-now','inquiry','personal-message','inform-payment'].includes(this.cmd)) {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n\r\n                if (evt.target.dataset['value']) {\r\n                    this.value = evt.target.dataset['value'];\r\n                }\r\n\r\n                this.close();\r\n            }\r\n        }\r\n    }\r\n\r\n    _fadeIn = (duration = 600, cb = null) => {\r\n        let keyframes = [\r\n            {\"opacity\": 0},\r\n            {\"opacity\": 1}\r\n        ]\r\n\r\n        let settings = {\r\n            duration: duration,\r\n            iterations: 1,\r\n            fill: 'both'\r\n        }\r\n\r\n        let animation = this.popups.animate(keyframes, settings);  \r\n\r\n        if (typeof cb === 'function') {\r\n            animation.addEventListener('finish', evt => {\r\n                cb();\r\n            })\r\n        }\r\n    }\r\n\r\n    _fadeOut = (duration = 600, cb = null) => {\r\n        let keyframes = [\r\n            {\"opacity\": 1},\r\n            {\"opacity\": 0}\r\n        ]\r\n\r\n        let settings = {\r\n            duration: duration,\r\n            iterations: 1,\r\n            fill: 'both'\r\n        }\r\n\r\n        let animation = this.popup.animate(keyframes, settings);  \r\n\r\n        if (typeof cb === 'function') {\r\n            animation.addEventListener('finish', evt => {\r\n                cb();\r\n            })\r\n        }\r\n    }\r\n\r\n    _popIn = (duration = 300, cb = null) => {\r\n        let keyframes = [\r\n            {\r\n                transform: \"scale(0.8)\",\r\n                opacity: 0\r\n            },\r\n            {\r\n                transform: \"scale(1.0)\",\r\n                opacity: 1\r\n            }\r\n        ]\r\n\r\n        let settings = {\r\n            duration: duration,\r\n            iterations: 1,\r\n            fill: 'both'\r\n        }\r\n\r\n        let animation = this.popup.animate(keyframes, settings);  \r\n\r\n        if (typeof cb === 'function') {\r\n            animation.addEventListener('finish', evt => {\r\n                cb();\r\n            })\r\n        }\r\n    }\r\n\r\n    _popOut = (duration = 400, cb = null) => {\r\n        let keyframes = [\r\n            {\r\n                transform: \"scale(1.0)\",\r\n                opacity: 1\r\n            },\r\n\r\n            {\r\n                transform: \"scale(0.8)\",\r\n                opacity: 0\r\n            }\r\n        ]\r\n\r\n        let settings = {\r\n            duration: duration,\r\n            iterations: 1,\r\n            fill: 'both'\r\n        }\r\n\r\n        let animation = this.popup.animate(keyframes, settings);  \r\n\r\n        if (typeof cb === 'function') {\r\n            animation.addEventListener('finish', evt => {\r\n                cb();\r\n            })\r\n        }\r\n    }\r\n\r\n    html = (html) => {\r\n        let main = this.popup.querySelector('main');\r\n\r\n        main.innerHTML = html; \r\n        $.run_script(main);\r\n    }\r\n\r\n    append = (html) => {\r\n        let main = this.popup.querySelector('main');\r\n\r\n        main.innerHTML = main.innerHTML + html; \r\n        $.run_script(main);\r\n    }\r\n\r\n    load = (url) => {\r\n        $.get_html(url).then(html => {\r\n            this.html(html);\r\n        })\r\n    }\r\n\r\n    set_cmd = cmd => {\r\n        this.cmd = cmd;\r\n    }\r\n\r\n    set_value =value => {\r\n        this.value = value;\r\n    }\r\n\r\n    resize = () => {\r\n        if (this.popup.getBoundingClientRect().height <= (window.innerHeight * 0.9)) {\r\n            this.dialog.classList.add('align-items-center');\r\n        } else {\r\n            this.dialog.classList.remove('align-items-center');            \r\n        }        \r\n    }\r\n\r\n    open = () => new Promise((resolve, reject) => {\r\n        this.dialog.setAttribute('open', 'true');\r\n\r\n        this.on('close', (cmd, value) => {\r\n            resolve({\r\n                cmd: cmd,\r\n                value: value\r\n            })    \r\n        })  \r\n\r\n        setTimeout(() => {\r\n            this.resize();\r\n\r\n            this['_' + this.options.animation + 'In'](this.options.transition_duration, () => {               \r\n                if (this.options.id === 'page-dialog') {\r\n                    if (this.options.slug != '') {\r\n                        $.pushState({type:'modal',id:this.options.id}, this.options.slug + (this.options.hash?('#' + this.options.hash):''));                    \r\n                    } else {\r\n                        let content_type = $.default(this.popup.querySelector('.wx-page').getAttribute('data-content-type'), 'page');\r\n                        $.pushState({type:'modal',id:this.options.id}, content_type + '/' + this.options.page_id + (this.options.hash?('#' + this.options.hash):''));                    \r\n                    }\r\n\r\n                    modals.push(this);     \r\n\r\n                    if (this.options.hash) {\r\n                        let anchor = this.popup.querySelector('a[name=\"' + this.options.hash + '\"]');\r\n\r\n                        if (anchor) {\r\n                            anchor.scrollIntoView();\r\n                        }\r\n                    }\r\n\r\n                    if (this.handlers.open) {\r\n                        this.handlers.open();     \r\n                    }       \r\n                } else {  \r\n                    $.pushState({type:'modal',id:this.options.id}, '#' + this.options.id);\r\n\r\n                    modals.push(this);     \r\n\r\n                    if (this.handlers.open) {\r\n                        this.handlers.open();     \r\n                    }       \r\n                }\r\n            })\r\n\r\n            if (this.options.always_on_top) {\r\n                dialogs_with_always_on_top = dialogs_with_always_on_top + 1;\r\n                document.body.classList.add('hide-mobile-menu');\r\n            }\r\n\r\n            document.body.classList.add('dialog-is-open');\r\n        }, this.options.delay_before_show)\r\n    }) \r\n\r\n    close = () => {\r\n        setTimeout(() => {\r\n            history.back();\r\n        }, 0)\r\n    }\r\n\r\n    do_close = () => {\r\n        this['_' + this.options.animation + 'Out'](this.options.transition_duration, () => {\r\n            this.dialog.close();\r\n            this.destroy();    \r\n            \r\n            if (modals.length === 0) {\r\n                document.body.classList.remove('dialog-is-open');          \r\n            }\r\n\r\n            if (this.handlers.close) {\r\n                this.handlers.close($.default(this.cmd, 'close'), $.default(this.value, ''));                \r\n            }\r\n        })\r\n    }\r\n\r\n    on = (cmd, cb) => {\r\n        this.handlers[cmd] = cb;\r\n    }\r\n\r\n    destroy = () => {\r\n        this.dialog.removeEventListener('click', this._click_handler);\r\n        this.dialog.remove();\r\n    }\r\n}\r\n"],"names":["icons","$","html","div","state","url","el","oldScriptEl","newScriptEl","attr","scriptText","resolve","reject","response","err","x","y","modals","dialogs_with_always_on_top","_popstate_handler","evt","dlg","_keydown_handler","ModalDialog","options","__publicField","duration","cb","keyframes","settings","animation","main","cmd","value","content_type","anchor","_default","json"],"mappings":";;;AAEA,MAAMA,IAAQ;AAAA,EACV,OAAO;AACX,GAEMC,IAAI;AAAA,EACN,IAAI,CAACC,MAAS;AACV,QAAIC,IAAM,SAAS,cAAc,KAAK;AACtC,WAAAA,EAAI,YAAYD,EAAK,QACdC,EAAI;AAAA,EACd;AAAA,EAED,WAAW,CAACC,IAAQ,MAAMC,MAAQ;AAC9B,YAAQ,aAAaD,GAAO,MAAM,EAAE,GACpC,QAAQ,UAAU,MAAM,MAAMC,CAAG;AAAA,EACpC;AAAA,EAED,YAAY,CAACC,MAAO;AAChB,UAAM,KAAKA,EAAG,iBAAiB,QAAQ,CAAC,EACnC,QAAQ,CAAAC,MAAe;AACpB,YAAMC,IAAc,SAAS,cAAc,QAAQ;AACnD,YAAM,KAAKD,EAAY,UAAU,EAAE,QAAS,CAAAE,MAAQ;AACpD,QAAAD,EAAY,aAAaC,EAAK,MAAMA,EAAK,KAAK;AAAA,MAC9D,CAAa;AAED,YAAMC,IAAa,SAAS,eAAeH,EAAY,SAAS;AAChE,MAAAC,EAAY,YAAYE,CAAU,GAClCH,EAAY,WAAW,aAAaC,GAAaD,CAAW;AAAA,IACxE,CAAS;AAAA,EACJ;AAAA,EAED,UAAU,CAACF,MAAQ,IAAI,QAAQ,CAACM,GAASC,MAAW;AAChD,UAAMP,CAAG,EACJ,KAAK,CAAAQ,MAAYA,EAAS,MAAM,EAChC,KAAK,CAAAX,MAAQS,EAAQT,CAAI,CAAC,EAC1B,MAAM,CAAAY,MAAOF,EAAOE,CAAG,CAAC;AAAA,EACrC,CAAK;AAAA,EAED,SAAS,CAACC,GAAGC,MACiBD,KAAM,QAAUA,MAAM,KACrCC,IAGJD;AAEf,GAEME,IAAS,CAAA;AACf,IAAIC,IAA6B,GAE7BC,IAAoB,CAACC,MAAQ;AAC7B,MAAIA,EAAI,SAAUA,EAAI,MAAM,SAAS,SAAU;AAC3C,IAAAA,EAAI,eAAc,GAClBA,EAAI,yBAAwB;AAE5B,QAAIC,IAAMJ,EAAO;AAEjB,IAAII,MACIA,EAAI,QAAQ,kBACZH,IAA6BA,IAA6B,GAEtDA,KAA8B,KAC9B,SAAS,KAAK,UAAU,OAAO,kBAAkB,IAIzDG,EAAI,SAAQ;AAAA,EAEnB;AACL,GAEIC,IAAmB,CAACF,MAAQ;AAC5B,EAAIA,EAAI,QAAQ,YACRH,EAAO,SAAS,MAChBG,EAAI,yBAAwB,GAC5BA,EAAI,eAAc,GAClB,QAAQ,KAAI;AAGxB;AAEA,SAAS,iBAAiB,WAAWE,CAAgB;AACrD,OAAO,iBAAiB,YAAYH,CAAiB;AAE9C,MAAMI,EAAY;AAAA,EACrB,YAAYC,IAAU,IAAI;AAmD1B,IAAAC,EAAA,wBAAiB,CAACL,MAAQ;AACtB,MAAIA,EAAI,OAAO,QAAQ,QAAQ,IACvB,KAAK,QAAQ,6BAA6B,OAC1CA,EAAI,eAAc,GAClBA,EAAI,gBAAe,GAEnB,WAAW,MAAK;AACZ,aAAK,QAAQ,OAAO,GACpB,KAAK,UAAU,EAAE,GACjB,KAAK,MAAK;AAAA,MACb,GAAE,CAAC,KAEDA,EAAI,OAAO,QAAQ,YAAY,MACtC,KAAK,MAAMA,EAAI,OAAO,QAAQ,KAEzB,CAAC,QAAO,aAAY,YAAW,YAAW,aAAY,eAAc,WAAU,WAAU,oBAAmB,gBAAgB,EAAE,SAAS,KAAK,GAAG,MAC/IA,EAAI,eAAc,GAClBA,EAAI,gBAAe,GAEfA,EAAI,OAAO,QAAQ,UACnB,KAAK,QAAQA,EAAI,OAAO,QAAQ,QAGpC,KAAK,MAAK;AAAA,IAGrB;AAED,IAAAK,EAAA,iBAAU,CAACC,IAAW,KAAKC,IAAK,SAAS;AACrC,UAAIC,IAAY;AAAA,QACZ,EAAC,SAAW,EAAC;AAAA,QACb,EAAC,SAAW,EAAC;AAAA,MAChB,GAEGC,IAAW;AAAA,QACX,UAAUH;AAAA,QACV,YAAY;AAAA,QACZ,MAAM;AAAA,MACT,GAEGI,IAAY,KAAK,OAAO,QAAQF,GAAWC,CAAQ;AAEvD,MAAI,OAAOF,KAAO,cACdG,EAAU,iBAAiB,UAAU,CAAAV,MAAO;AACxC,QAAAO;MAChB,CAAa;AAAA,IAER;AAED,IAAAF,EAAA,kBAAW,CAACC,IAAW,KAAKC,IAAK,SAAS;AACtC,UAAIC,IAAY;AAAA,QACZ,EAAC,SAAW,EAAC;AAAA,QACb,EAAC,SAAW,EAAC;AAAA,MAChB,GAEGC,IAAW;AAAA,QACX,UAAUH;AAAA,QACV,YAAY;AAAA,QACZ,MAAM;AAAA,MACT,GAEGI,IAAY,KAAK,MAAM,QAAQF,GAAWC,CAAQ;AAEtD,MAAI,OAAOF,KAAO,cACdG,EAAU,iBAAiB,UAAU,CAAAV,MAAO;AACxC,QAAAO;MAChB,CAAa;AAAA,IAER;AAED,IAAAF,EAAA,gBAAS,CAACC,IAAW,KAAKC,IAAK,SAAS;AACpC,UAAIC,IAAY;AAAA,QACZ;AAAA,UACI,WAAW;AAAA,UACX,SAAS;AAAA,QACZ;AAAA,QACD;AAAA,UACI,WAAW;AAAA,UACX,SAAS;AAAA,QACZ;AAAA,MACJ,GAEGC,IAAW;AAAA,QACX,UAAUH;AAAA,QACV,YAAY;AAAA,QACZ,MAAM;AAAA,MACT,GAEGI,IAAY,KAAK,MAAM,QAAQF,GAAWC,CAAQ;AAEtD,MAAI,OAAOF,KAAO,cACdG,EAAU,iBAAiB,UAAU,CAAAV,MAAO;AACxC,QAAAO;MAChB,CAAa;AAAA,IAER;AAED,IAAAF,EAAA,iBAAU,CAACC,IAAW,KAAKC,IAAK,SAAS;AACrC,UAAIC,IAAY;AAAA,QACZ;AAAA,UACI,WAAW;AAAA,UACX,SAAS;AAAA,QACZ;AAAA,QAED;AAAA,UACI,WAAW;AAAA,UACX,SAAS;AAAA,QACZ;AAAA,MACJ,GAEGC,IAAW;AAAA,QACX,UAAUH;AAAA,QACV,YAAY;AAAA,QACZ,MAAM;AAAA,MACT,GAEGI,IAAY,KAAK,MAAM,QAAQF,GAAWC,CAAQ;AAEtD,MAAI,OAAOF,KAAO,cACdG,EAAU,iBAAiB,UAAU,CAAAV,MAAO;AACxC,QAAAO;MAChB,CAAa;AAAA,IAER;AAED,IAAAF,EAAA,cAAO,CAACvB,MAAS;AACb,UAAI6B,IAAO,KAAK,MAAM,cAAc,MAAM;AAE1C,MAAAA,EAAK,YAAY7B,GACjBD,EAAE,WAAW8B,CAAI;AAAA,IACpB;AAED,IAAAN,EAAA,gBAAS,CAACvB,MAAS;AACf,UAAI6B,IAAO,KAAK,MAAM,cAAc,MAAM;AAE1C,MAAAA,EAAK,YAAYA,EAAK,YAAY7B,GAClCD,EAAE,WAAW8B,CAAI;AAAA,IACpB;AAED,IAAAN,EAAA,cAAO,CAACpB,MAAQ;AACZ,MAAAJ,EAAE,SAASI,CAAG,EAAE,KAAK,CAAAH,MAAQ;AACzB,aAAK,KAAKA,CAAI;AAAA,MAC1B,CAAS;AAAA,IACJ;AAED,IAAAuB,EAAA,iBAAU,CAAAO,MAAO;AACb,WAAK,MAAMA;AAAA,IACd;AAED,IAAAP,EAAA,mBAAW,CAAAQ,MAAS;AAChB,WAAK,QAAQA;AAAA,IAChB;AAED,IAAAR,EAAA,gBAAS,MAAM;AACX,MAAI,KAAK,MAAM,sBAAuB,EAAC,UAAW,OAAO,cAAc,MACnE,KAAK,OAAO,UAAU,IAAI,oBAAoB,IAE9C,KAAK,OAAO,UAAU,OAAO,oBAAoB;AAAA,IAExD;AAED,IAAAA,EAAA,cAAO,MAAM,IAAI,QAAQ,CAACd,GAASC,MAAW;AAC1C,WAAK,OAAO,aAAa,QAAQ,MAAM,GAEvC,KAAK,GAAG,SAAS,CAACoB,GAAKC,MAAU;AAC7B,QAAAtB,EAAQ;AAAA,UACJ,KAAKqB;AAAA,UACL,OAAOC;AAAA,QACvB,CAAa;AAAA,MACb,CAAS,GAED,WAAW,MAAM;AACb,aAAK,OAAM,GAEX,KAAK,MAAM,KAAK,QAAQ,YAAY,IAAI,EAAE,KAAK,QAAQ,qBAAqB,MAAM;AAC9E,cAAI,KAAK,QAAQ,OAAO,eAAe;AACnC,gBAAI,KAAK,QAAQ,QAAQ;AACrB,cAAAhC,EAAE,UAAU,EAAC,MAAK,SAAQ,IAAG,KAAK,QAAQ,GAAE,GAAG,KAAK,QAAQ,QAAQ,KAAK,QAAQ,OAAM,MAAM,KAAK,QAAQ,OAAM,GAAG;AAAA,iBAChH;AACH,kBAAIiC,IAAejC,EAAE,QAAQ,KAAK,MAAM,cAAc,UAAU,EAAE,aAAa,mBAAmB,GAAG,MAAM;AAC3G,cAAAA,EAAE,UAAU,EAAC,MAAK,SAAQ,IAAG,KAAK,QAAQ,GAAE,GAAGiC,IAAe,MAAM,KAAK,QAAQ,WAAW,KAAK,QAAQ,OAAM,MAAM,KAAK,QAAQ,OAAM,GAAG;AAAA,YAC9I;AAID,gBAFAjB,EAAO,KAAK,IAAI,GAEZ,KAAK,QAAQ,MAAM;AACnB,kBAAIkB,IAAS,KAAK,MAAM,cAAc,aAAa,KAAK,QAAQ,OAAO,IAAI;AAE3E,cAAIA,KACAA,EAAO,eAAc;AAAA,YAE5B;AAED,YAAI,KAAK,SAAS,QACd,KAAK,SAAS;UAEtC;AACoB,YAAAlC,EAAE,UAAU,EAAC,MAAK,SAAQ,IAAG,KAAK,QAAQ,GAAE,GAAG,MAAM,KAAK,QAAQ,EAAE,GAEpEgB,EAAO,KAAK,IAAI,GAEZ,KAAK,SAAS,QACd,KAAK,SAAS;QAGtC,CAAa,GAEG,KAAK,QAAQ,kBACbC,IAA6BA,IAA6B,GAC1D,SAAS,KAAK,UAAU,IAAI,kBAAkB,IAGlD,SAAS,KAAK,UAAU,IAAI,gBAAgB;AAAA,MACxD,GAAW,KAAK,QAAQ,iBAAiB;AAAA,IACzC,CAAK;AAED,IAAAO,EAAA,eAAQ,MAAM;AACV,iBAAW,MAAM;AACb,gBAAQ,KAAI;AAAA,MACf,GAAE,CAAC;AAAA,IACP;AAED,IAAAA,EAAA,kBAAW,MAAM;AACb,WAAK,MAAM,KAAK,QAAQ,YAAY,KAAK,EAAE,KAAK,QAAQ,qBAAqB,MAAM;AAC/E,aAAK,OAAO,SACZ,KAAK,QAAO,GAERR,EAAO,WAAW,KAClB,SAAS,KAAK,UAAU,OAAO,gBAAgB,GAG/C,KAAK,SAAS,SACd,KAAK,SAAS,MAAMhB,EAAE,QAAQ,KAAK,KAAK,OAAO,GAAGA,EAAE,QAAQ,KAAK,OAAO,EAAE,CAAC;AAAA,MAE3F,CAAS;AAAA,IACJ;AAED,IAAAwB,EAAA,YAAK,CAACO,GAAKL,MAAO;AACd,WAAK,SAASK,CAAG,IAAIL;AAAA,IACxB;AAED,IAAAF,EAAA,iBAAU,MAAM;AACZ,WAAK,OAAO,oBAAoB,SAAS,KAAK,cAAc,GAC5D,KAAK,OAAO;IACf;AAtSG,UAAMW,IAAW;AAAA,MACb,OAAO;AAAA,MACP,0BAA0B;AAAA,MAC1B,IAAI;AAAA,MACJ,SAAS;AAAA,MACT,qBAAqB;AAAA,MACrB,mBAAmB;AAAA,MACnB,eAAe;AAAA,MACf,WAAW;AAAA;AAAA,IACd;AAED,SAAK,WAAW,IAChB,KAAK,MAAM,IACX,KAAK,QAAQ,IACb,KAAK,UAAU,OAAO,OAAOA,GAAUZ,CAAO,GAC9C,KAAK,SAAS,SAAS,cAAc,QAAQ,GAC7C,KAAK,OAAO,aAAa,QAAQ,OAAO,GACxC,KAAK,OAAO,aAAa,WAAW,KAAK,QAAQ,EAAE,GACnD,KAAK,QAAQvB,EAAE,GAAG,uCAAuC,KAAK,QAAQ,QAAQ,kBAAkB,KAAK,QAAQ,UAAU,oBAAoBD,EAAM,QAAQ,QAAQ,GAE7J,KAAK,QAAQ,QAAQ,OACrB,KAAK,MAAM,UAAU,IAAI,OAAO,GAGpC,KAAK,OAAO,YAAY,KAAK,KAAK,GAClC,KAAK,OAAO,eAAe,MAAM,MAEjC,SAAS,KAAK,YAAY,KAAK,MAAM,GACrC,KAAK,OAAO,iBAAiB,SAAS,KAAK,cAAc;AAAA,EAC5D;AA0QL;AAxQIyB,EAjCSF,GAiCF,cAAa,MACTN,IAGXQ,EArCSF,GAqCF,qBAAoB,MACnBN,EAAO,SAAS,IACTA,EAAOA,EAAO,SAAQ,CAAC,IAG3B,OAGXQ,EA7CSF,GA6CF,YAAW,CAAClB,MAAQ,IAAI,QAAQ,CAACM,GAASC,MAAW;AACxD,QAAMP,CAAG,EACJ,KAAK,CAAAQ,MAAYA,EAAS,MAAM,EAChC,KAAK,CAAAwB,MAAQ1B,EAAQ0B,CAAI,CAAC,EAC1B,MAAM,CAAAvB,MAAOF,EAAOE,CAAG,CAAC;AACrC,CAAK;"}