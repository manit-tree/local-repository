{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import './style.css';\r\n\r\nlet version = '1.1';\r\nlet binding_document_mousedown = false;\r\nlet active_menu = null;\r\n\r\nfunction get_default(x, y) {\r\n\tif ((x === undefined) || (x === null) || (x === 0)) {\r\n\t\treturn y;\r\n\t}\r\n\r\n\treturn x;\r\n}\r\n\r\nfunction get_json(url) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t    fetch(url)\r\n\t        .then(response => response.json())\r\n\t        .then(json => resolve(json))\r\n\t        .catch(err => reject(err));\t\t\r\n\t})\r\n}\r\n\r\ndocument.addEventListener('keydown', evt => {\r\n\tif (evt.key == 'Escape') {\r\n\t\tif (active_menu) {\r\n\t\t\tactive_menu.hide();\r\n\t\t}\t\t\r\n\t}\r\n})\r\n\r\nexport class ContextMenu {\r\n\tconstructor(menu_url) {\r\n\t\tthis.version = version;\r\n\t\tthis.handlers = new Map();\r\n\t\tthis.menu = document.createElement('dialog');\r\n\t\tthis.menu.classList.add('context-menu');\r\n\t\tthis.menu.innerHTML = '<ul></li>';\r\n\t\tthis.menu_created = false;\r\n\t\tthis.menu.width = 0;\r\n\t\tthis.menu.height = 0;\r\n\t\tthis.gap = 10;\r\n\r\n\t\tlet load = (menu_url) => {\r\n\t\t\tfunction create_menu_item(item) {\r\n\t\t\t\tlet li = document.createElement('li');\r\n\t\t\t\tlet span = document.createElement('span');\r\n\t\t\t\tlet a = document.createElement('a');\r\n\t\t\t\tlet icon = get_default(item.icon, '');\r\n\t\t\t\tlet text = get_default(item.text, '');\r\n\t\t\t\tif (item.id) li.setAttribute('data-id', item.id);\r\n\t\t\t\tif (item.text) li.setAttribute('data-text', item.text);\r\n\t\t\t\tif (item.action) li.setAttribute('data-action', item.action);\r\n\t\t\t\tif (item.group) li.setAttribute('data-group', item.group);\r\n\t\t\t\tif (item.data) li.setAttribute('data-data', item.data);\r\n\t\t\t\tif (item.scale) li.style.setProperty('--scale', item.scale);\r\n\r\n\t\t\t\ta.setAttribute('href', '#');\r\n\r\n\t\t\t\tif (text !== '') {\r\n\t\t\t\t\tif (text == '-') {\r\n\t\t\t\t\t\tli.setAttribute('data-role', 'seperator');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ta.innerText = text;\r\n\t\t\t\t\t\tli.append(a);\r\n\r\n\t\t\t\t\t\tif (icon !== '') {\r\n\t\t\t\t\t\t\tspan.innerHTML = icon;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tli.prepend(span);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn li;\r\n\t\t\t}\r\n\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tif (!this.menu_created) {\r\n\t\t\t\t\tthis.menu_created = true;\r\n\r\n\t\t\t\t\tlet ul = this.menu.querySelector('ul');\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet url = menu_url;\r\n\t\t\t\t\t\tlet ts = (new Date()).getTime();\r\n\r\n\t\t\t\t\t\tif (url.includes('?')) {\r\n\t\t\t\t\t\t\turl = url + '&ts=' + ts;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\turl = url + '?ts=' + ts;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tget_json(url).then(menu => {\r\n\t\t\t\t\t\t\tlet w = get_default(menu.width, '180');\r\n\r\n\t\t\t\t\t\t\tul.style.setProperty('--menu-width', w + 'px');\r\n\r\n\t\t\t\t\t\t\tmenu.items.forEach(item => {\r\n\t\t\t\t\t\t\t\tul.append(create_menu_item(item));\r\n\t\t\t\t\t\t\t})\t\t\t\r\n\r\n\t\t\t\t\t\t\tdocument.body.append(this.menu);\t\r\n\t\t\t\t\t\t\tresolve(true);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolve(true);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tload(menu_url);\r\n\r\n\t\tthis.menu.addEventListener('contextmenu', evt => {\r\n\t\t\tevt.preventDefault();\r\n\t\t\tevt.stopPropagation();\r\n\t\t})\r\n\r\n\t\tthis.menu.addEventListener('click', evt => {\r\n\t\t\tlet ok = true;\r\n\t\t\tlet li = evt.target.closest('li');\r\n\r\n\t\t\tif (!li) return;\r\n\r\n\t\t\tlet action = get_default(li.dataset['action'], '');\r\n\r\n\t\t\tif ((action !== '') && (li.matches(':not(.disabled)'))) {\r\n\t\t\t\tlet handler = this.handlers.get(action);\r\n\r\n\t\t\t\tif (typeof handler === 'function') {\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\taction: action,\r\n\t\t\t\t\t\tdata: JSON.parse(get_default(li.dataset['data'], '{}')),\r\n\t\t\t\t\t\tel: li,\r\n\t\t\t\t\t\tcontext_menu: this\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet res = handler.bind(this.context)(data);\r\n\t\t\t\t\r\n\t\t\t\t\tif (res === false) {\r\n\t\t\t\t\t\tok = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (ok) {\r\n\t\t\t\tthis.hide();\r\n\t\t\t\tevt.preventDefault();\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif (!binding_document_mousedown) {\r\n\t\t\tdocument.addEventListener('mousedown', evt => {\r\n\t\t\t\tlet el = evt.target;\r\n\r\n\t\t\t\tif (!el.closest('.context-menu')) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tmount(el) {\r\n\t\tel.addEventListener('contextmenu', evt => {\r\n\t\t\tlet handler = this.handlers.get('before-show');\r\n\t\t\tlet res = true;\r\n\r\n\t\t\tif (handler) {\r\n\t\t\t\tres = handler.bind(el)();\r\n\t\t\t}\r\n\r\n\t\t\tevt.preventDefault();\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tthis.update();\r\n\r\n\t\t\t\tlet {x, y} = evt;\r\n\r\n\t\t\t\tif (x < this.gap) {x = gap};\r\n\t\t\t\tif (x + this.menu.width + this.gap > window.innerWidth) {x = window.innerWidth - this.menu.width - this.gap };\r\n\t\t\t\tif (y < this.gap) {y = gap};\r\n\t\t\t\tif (y + this.menu.height + this.gap > window.innerHeight) {y = window.innerHeight - this.menu.height - this.gap};\r\n\r\n\t\t\t\tthis.show(x, y, el);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tshow(x, y, context) {\r\n\t\tlet ok = true;\r\n\r\n\t\tif (active_menu) {\r\n\t\t\tactive_menu.hide();\t\t\t\t\r\n\t\t}\r\n\r\n\t\tthis.reset_all_menu_items();\r\n\t\tthis.context = context;\r\n\r\n\t\tlet handler = this.handlers['before-show'];\r\n\r\n\t\tif (typeof handler === 'function') {\r\n\t\t\tlet data = {\r\n\t\t\t\tcontext_menu: this\r\n\t\t\t}\r\n\r\n\t\t\t// return false if you don't want to show menu\r\n\t\t\tlet res = handler.bind(this.context)(data);\r\n\t\t\r\n\t\t\tif (res === false) {\r\n\t\t\t\tok = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (ok) {\r\n\t\t\tlet margin = 14;\r\n\t\t\tlet width, height;\r\n\t\t\tlet ul;\r\n\r\n\t\t\tthis.menu.classList.add('ux-show');\r\n\t\t\tthis.menu.classList.remove('popup-left');\r\n\r\n\t\t\tul = this.menu.querySelector('& > ul');\r\n\t\t\twidth = parseInt(ul.dataset['width']);\r\n\t\t\theight = parseInt(ul.dataset['height']);\r\n\t\t\t\r\n\t\t\tif (x + width > (window.innerWidth - margin)) {\r\n\t\t\t\tx = window.innerWidth - margin - width;\r\n\t\t\t} else if (x < margin) {\r\n\t\t\t \tx = margin;\r\n\t\t\t}\r\n\r\n\t\t\tif ((y + height) > (document.documentElement.scrollTop + window.innerHeight - margin)) {\r\n\t\t\t\ty = document.documentElement.scrollTop + window.innerHeight - margin - height;\r\n\t\t\t} else if (y < margin) {\r\n\t\t\t\ty = margin\r\n\t\t\t}\r\n\r\n\t\t\tif (x + (width * 2) > window.innerWidth) {\r\n\t\t\t\tthis.menu.classList.add('popup-left');\t\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\tthis.menu.style.setProperty('left', x + 'px');\r\n\t\t\tthis.menu.style.setProperty('top', y + 'px');\r\n\t\t\tthis.menu.show();\r\n\r\n\t\t\tactive_menu = this;\r\n\t\t}\r\n\t}\r\n\r\n\thide() {\r\n\t\tthis.menu.classList.remove('ux-show');\r\n\t\tthis.menu.close();\r\n\t\tactive_menu = null;\r\n\t}\r\n\r\n\treset_all_menu_items() {\r\n\t\tthis.menu.querySelectorAll('.hidden').forEach(item => {\r\n\t\t\titem.classList.remove('ux-hidden');\r\n\t\t})\r\n\r\n\t\tthis.menu.querySelectorAll('.disabled').forEach(item => {\r\n\t\t\titem.classList.remove('ux-disabled');\r\n\t\t})\r\n\t}\r\n\r\n\tshow_menu_item_by_id(id) {\r\n\t\tthis.menu.querySelectorAll('li[data-id=\"' + id + '\"]').forEach(item => {\r\n\t\t\titem.classList.remove('ux-hidden');\r\n\t\t})\r\n\t}\r\n\r\n\thide_menu_item_by_id(id) {\r\n\t\tthis.menu.querySelectorAll('li[data-id=\"' + id + '\"]').forEach(item => {\r\n\t\t\titem.classList.add('ux-hidden');\r\n\t\t})\r\n\t}\r\n\r\n\thide_menu_item_by_cmd(cmd) {\r\n\t\tthis.menu.querySelectorAll('li[data-cmd=\"' + cmd + '\"]').forEach(item => {\r\n\t\t\titem.classList.add('ux-hidden');\r\n\t\t})\r\n\t}\r\n\r\n\thide_menu_item_by_group(group) {\r\n\t\tthis.menu.querySelectorAll('li[data-group*=\"' + group + '\"]').forEach(item => {\r\n\t\t\titem.classList.add(\"ux-hidden\");\r\n\t\t})\r\n\t}\r\n\r\n\tget_menu_item(id) {\r\n\t\treturn this.menu.querySelector('li[data-id=\"' + id + '\"]');\r\n\t}\r\n\r\n\tdisable_menu_item_by_id(id) {\r\n\t\tthis.menu.querySelectorAll('li[data-id=\"' + id + '\"]').forEach(item => {\r\n\t\t\titem.classList.add('ux-disabled');\r\n\t\t})\t\t\t\r\n\t}\r\n\r\n\tenable_menu_item_by_id(id) {\r\n\t\tthis.menu.querySelectorAll('li[data-id=\"' + id + '\"]').forEach(item => {\r\n\t\t\titem.classList.remove('ux-disabled');\r\n\t\t})\t\t\t\r\n\t}\r\n\r\n\tset_icon(id, icon = '') {\r\n\t\tlet menu_item = this.get_menu_item(id);\r\n\t\tlet span = menu_item.querySelector('span');\r\n\r\n\t\tif (icon == '') {\r\n\t\t\tspan.innerHTML = '';\r\n\t\t} else {\r\n\t\t\tif (span) {\r\n\t\t\t\tspan.remove();\r\n\t\t\t}\r\n\r\n\t\t\tspan = document.createElement('span');\r\n\t\t\tspan.innerHTML = icon;\r\n\t\t\tmenu_item.prepend(span);\r\n\t\t}\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tlet w, h;\r\n\t\tlet arr = new Array();\r\n\t\tlet i = 0;\r\n\t\tlet bounding_rect;\r\n\r\n\t\tthis.menu.style.visibility = 'hidden';\r\n\t\tthis.menu.style.display = 'block';\r\n\t\tbounding_rect = this.menu.getBoundingClientRect();\r\n\r\n\t\tthis.menu.width = bounding_rect.width;\r\n\t\tthis.menu.height = bounding_rect.height;\r\n\t\tthis.menu.style.display = 'none';\r\n\t\tthis.menu.style.visibility = 'visible';\r\n\t}\r\n\r\n\ton(action, handler) {\r\n\t\tthis.handlers.set(action, handler);\r\n\t}\r\n}\r\n"],"names":["version","active_menu","get_default","x","y","get_json","url","resolve","reject","response","json","err","evt","ContextMenu","menu_url","create_menu_item","item","li","span","icon","text","ul","ts","menu","w","error","ok","action","handler","data","el","res","context","margin","width","height","id","cmd","group","menu_item","bounding_rect"],"mappings":"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"}